# 딕셔너리 응용

> 딕셔너리 조작, 반복문으로 딕셔너리 모두 출력, 딕셔너리 표현식, 중첩, 할당과 복사

## 딕셔너리에 키-값 쌍 추가하기

> 딕셔너리에 키-값 쌍을 추가하는 메서드는 두 가지가 있음

- `setdefault` : 키-값 쌍 추가
- `update` : 키의 값 수정, 키가없으면 키-값 쌍 추가

### 딕셔너리에 키와 기본값 저장하기

- `setdefault(키)`는 딕셔너리에 키-값 쌍을 추가함
- `setdefault`에 키만 지저하면 값에 `None`을 저장함

```py
>>> x = {'a': 10, 'b': 20, 'c': 30}
>>> x.setdefault('d')
>>> x
{'a': 10, 'b': 20, 'c': 30, 'd': None}
```

- `setdefault(키, 기본값)`

```py
>>> x.setdefault('e', 999)
999
>>> x
{'a': 10, 'b': 20, 'c': 30, 'd': None, 'e': 999}
```

## 딕셔너리에서 키의 값 수정하기

- `update(키=값)`은 이름 그대로 딕셔너리에서 키의 값을 수정
- 키가 문자열일 때만 사용 가능

```py
>>> x = {'a': 10, 'b': 20, 'c': 30}
>>> x.update(a=777)
>>> x
{'a': 777, 'b': 20, 'c': 30}

# 키가 없으면 키-값 쌍을 추가
>>> x.update(x=10000)
>>> x
{'a': 777, 'b': 20, 'c': 30, 'x': 10000}
```

- 만약 키가 숫자일 경우 `update(딕셔너리)`와 같이 딕셔너리를 넣어서 값을 수정할 수 있다.

```py
>>> y = {1: 'one', 2: 'two', 3: 'three'}
>>> y.update({1: 'FIRST', 2: 'SECOND'})
>>> y
{1: 'FIRST', 2: 'SECOND', 3: 'three'}
```

### update(리스트), update(튜플)

> 리스트와 튜플로 값을 수정

```py
>>> y.update([[1, 'ONEONE'], [2, 'TWOTWO']])
>>> y
{1: 'ONEONE', 2: 'TWOTWO', 3: 'three'}
```

- 키 리스트와 값 리스트를 묶은 `zip` 객체로 값을 수정할 수 있음

```py
>>> y.update(zip([1,2], ['first', 'second']))
>>> y
{1: 'first', 2: 'second', 3: 'three'}
```

## 딕셔너리에서 키-값 쌍 삭제하기

- `pop(키)`는 딕셔너리에서 특정 키-값 쌍을 삭제한 뒤 삭제한 값을 반환함

```py
>>> x = {'a': 10, 'b': 20, 'c': 30}
>>> x.pop('a')
10

>>> x
{'b': 20, 'c': 30}
```

- `del`로 특정 키-값을 삭제할 수도 있다.

```py
>>> x = {'a': 10, 'b': 20, 'c': 30}
>>> del x['a']
>>> x
{'b': 20, 'c': 30}
```

### 딕셔너리에서 임의의 키-값 쌍 삭제하기

- `popitem()`은 딕셔너리에서 임의의 키-값 쌍을 삭제한 뒤 삭제한 키-값쌍을 튜플로 반환

```py
>>> x = {'a': 10, 'b': 20, 'c': 30}
>>> x.popitem()
('c', 30)
>>> x
{'a': 10, 'b': 20}
```

### 딕셔너리의 모든 키-값 쌍 삭제하기

- `clear()`는 딕셔너리의 모든 키-값 쌍을 삭제한다.

```
>>> x.clear()
>>> x
{}
```

## 딕셔너리에서 키의 값을 가져오기

- `get(키)`는 딕셔너리에서 특정 키의 값을 가져온다.
- `get(키, 기본값)` 처럼 기본값을 지정하면 있을때는 가져오지만 키가 없을때는 기본값을 반환

```py
>>> x = {'a': 10, 'b': 20, 'c': 30}
>>> x.get('a')
10
```

### 딕셔너리에서 키-값 쌍을 모두 가져오기

- `items` : 키-값 쌍을 모두 가져옴
- `keys` : 키를 모두 가져옴
- `values` : 값을 모두 가져옴

```py
>>> x = {'a': 10, 'b': 20, 'c': 30}
>>> x.items()
dict_items([('a', 10), ('b', 20), ('c', 30)])

>>> x.keys()
dict_keys(['a', 'b', 'c'])

>>> x.values()
dict_values([10, 20, 30])
```

## 리스트와 튜플로 딕셔너리 만들기

- `dict.fromkeys(키리스트, 값)`
- 값을 지정하지 않으면 모두 `None`을 저장함

```py
>>> keys = ['a', 'b', 'c', 'd']
>>> x = dict.fromkeys(keys)
>>> x
{'a': None, 'b': None, 'c': None, 'd': None}

>>> y = dict.fromkeys(keys, 100)
>>> y
{'a': 100, 'b': 100, 'c': 100, 'd': 100}
```

## 반복문으로 딕셔너리의 키-값 쌍을 모두 출력하기

```py
>>> x = {'a': 10, 'b': 20, 'c': 30}
>>> for i in x:
	    print(i, end=' ')

# a b c
```

이렇게하면 키만 출력된다. 모두 출력하려면 `item()`를 이용한다.

```py
>>> x = {'a': 10, 'b': 20, 'c': 30}
>>> for key, value in x.items():
    print(key, value)

# a 10
# b 20
# c 30
```

## 딕셔너리 표현식 사용하기

- 리스트와 마찬가지로 딕셔너리도 `for`반복문과 `if`조건문을 사용해 딕셔너리를 생성할 수 있다.
- `{키: 값 for 키, 값 in 딕셔너리}`
- `dict({키: 값 for 키, 값 in 딕셔너리})`

```py
>>> keys = ['a', 'b', 'c', 'd']
>>> x= {key: value for key, value in dict.fromkeys(keys).items()}
>>> x
{'a': None, 'b': None, 'c': None, 'd': None}
```

- `keys`로 키만 가져온 뒤 특정 값을 넣거나, `values`로 값을 가져온 뒤 값을 키로 사용할 수도 있음

### 딕셔너리 표현식에서 if 조건문 사용하기

- 딕셔너리는 특정 키를 삭제하는 `pop` 메서드만 제공하고 특정 값을 삭제하는 메서드는 제공하지 않는다.

```py
>>> x = {'a': 10, 'b': 20, 'c': 30}
>>> for key, value in x.items():
        if value == 20:
            del x[key]

# Traceback (most recent call last):
#   File "<pyshell#80>", line 1, in <module>
#     for key, value in x.items():
# RuntimeError: dictionary changed size during iteration
```

이렇게하면 반복 도중 딕셔너리 크기가 바뀌었다는 에러가 발생한다.<br>따라서 if 조건문을 사용하여 삭제할 값을 제외하면 된다.

```py
>>> x = {'a': 10, 'b': 20, 'c': 30}
>>> x = {key:value for key,value in x.items() if value != 20}
>>> x
{'a': 10, 'c': 30}
```

## 딕셔너리 안에서 딕셔너리 사용하기 (중첩 딕셔너리)

- `딕셔너리 = {키1: {키a: 값a}, 키2: {키b: 값b}}`

```py
>>> planet = {
        'Earth':{
            'radius': 1122,
            'mass': 3344,
            'obital': 5566
        },
        'Mars':{
            'radius':77,
            'mass':88,
            'obital':99
        }
    }
>>> print(planet['Mars']['mass'])
88
```

## 딕셔너리의 할당과 복사

- 딕셔너리를 만든 뒤 다른 변수에 할당하면 변수 이름만 다를 뿐 x와 y는 같은 객체이다.
- 다음과 같이 키 `'a'`값을 수정하면 x와 y모두 반영된다.

```py
>>> x = {'a': 10, 'b': 20, 'c': 30}
>>> y = x

>>> x is y
True

>>> y['a'] = 999
>>> x
{'a': 999, 'b': 20, 'c': 30}
>>> y
{'a': 999, 'b': 20, 'c': 30}
```

<br>

- 딕셔너리 x와 y를 완전히 두 개로 만드려면 `copy`메서드로 모든 키-값 쌍을 복사해야 한다.
- x와 y는 별개이므로 한 쪽 값을 변경해도 다른 딕셔너리에 영향을 미치지 않는다.

```py
>>> x = {'a': 11, 'b': 22, 'c': 33}
>>> y = x.copy()

>>> x is y
False
>>> x == y
True

>>> y['a'] = 777
>>> x
{'a': 11, 'b': 22, 'c': 33}
>>> y
{'a': 777, 'b': 22, 'c': 33}
```

### 중첩 딕셔너리의 할당과 복사

- 중첩 딕셔너리를 만든 뒤 copy메서드로 복사하고 y값을 바꾸면 x와 y모두 반영된다.

```py
>>> x = {'a': {'python': '2.7'}, 'b': {'python': '3.7'}}
>>> y = x.copy()
>>> y['a']['python'] = '9999'

>>> y
{'a': {'python': '9999'}, 'b': {'python': '3.7'}}
>>> x
{'a': {'python': '9999'}, 'b': {'python': '3.7'}}
```

<br>

- 중첩 딕셔너리를 완전히 복사하려면 `copy`모듈의 `deepcopy`함수를 사용한다.

```py
>>> x = {'a': {'python': '2.7'}, 'b': {'python': '3.7'}}
>>> import copy
>>> y = copy.deepcopy(x)
>>> y['a']['python'] = '9999'

>>> x
{'a': {'python': '2.7'}, 'b': {'python': '3.7'}}
>>> y
{'a': {'python': '9999'}, 'b': {'python': '3.7'}}
```

이제 딕셔너리 y값을 변경해도 딕셔너리 x에는 영향이 없다.
