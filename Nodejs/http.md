## HTTP 모듈 웹서버

> 클라이언트에서 서버로 요청(request)을 보내고, 서버에서는 클라이언트에게 응답(response)을 보낸다.

- http모듈에는 `createServer`메서드가 있다. 인자로 요청에 대한 콜백 함수를 넣을 수 있다. 요청이 들어올 때마다 콜백 함수가 실행된다.

- `createServer`메서드 뒤에 `listen`메서드를 붙이고 클라이언트에 공개할 포트번호와 포트 연결

### localhost와 포트

- localhost는 현재 컴퓨터의 내부 주소( = 숫자주소 127.0.0.1로 해도 같다. 숫자 주소를 IP라고 한다.)
- 포트는 서버 내에서 프로세스를 구분하는 번호
  - 포트 번호 21(FTP), 80(HTTP), 443(HTTPS), 3306(MYSQL)을 IP주소 뒤에 콜론`:`과 적는다.

<br>

## 쿠키와 세션

> 누구인지 기억하기 위해 서버는 요청에 응답할때 쿠키를 같이 보낸다. 쿠키는 `키=값`쌍이다. 쿠키는 요청과 응답의 헤더(header)에 저장된다.

- 쿠키는 `req.headers.cookie`에 들어있다.
- `req.headers`는 요청의 헤더이다.
- `res.writeHead`메서드는 응답의 헤더에 쿠키를 기록한다.

<br>

## REST API

> REST API는 서버의 자원을 정의하고, 자원에 대한 주소를 지정하는 방법이다. 주소외에도 HTTP요청 메서드를 사용한다.

- **GET** : 서버 자원을 가져오고자 할 때 사용. 요청의 본문에 데이터를 넣지 않음. 데이터를 서버에 보내야하면 쿼리스트링 사용
- **POST** : 서버에 자원을 새로 등록하고자 할 때 사용. 요청의 본문에 새로 등록할 데이터를 넣어 보냄
- **PUT** : 서버의 자원을 요청에 들어있는 자원으로 **치환**할 때 사용
- **PATCH** : 서버 자원의 **일부만 수정**하고자 할 때 사용
- **DELETE** : 서버의 자원을 삭제할 때

### ex

| HTTP 메서드 | 주소            | 역할                     |
| ----------- | --------------- | ------------------------ |
| GET         | /               | restFront.html 파일 제공 |
| GET         | /about          | about.html 파일 제공     |
| GET         | /users          | 사용자 목록 제공         |
| GET         | 기타            | 기타 정적 파일 제공      |
| POST        | /users          | 사용자등록               |
| PUT         | /users/사용자id | 해당id의 사용자 수정     |
| DELETE      | /users/사용자id | 해당id의 사용자 제거     |

<br>

## https와 http2

https모듈은 웹 서버에 SSL 암호화 추가. GET이나 POST요청을 할 때 오고가는 데이터를 암호화 한다. (인증서 필요)

노드의 http2모듈은 SSL암호화와 더불어 최신 HTTP프로토콜인 http/2를 사용할 수 있게함.

## cluster

cluster 모듈은 싱글 스레드인 노드가 CPU 코어를 모두 사용할 수 있게 함. 포트를 공유하는 노드 프로세스를 여러개 둘 수도 있어서 병렬로 실행된 서버의 개수 만큼 요청이 분산되게 할 수 있다.
