## node.js란?

- Node.js는 크롬 V8 자바스크립트 엔진으로 빌드된 자바스크립트 런타임이다.
- Node.js는 이벤트 기반, 논블로킹 I/O 모델을 사용해 가볍고 효율적이다.

<br>

### 서버

- 서버는 네트워크를 통해 클라이언트에 정보나 서비스를 제공하는 컴퓨터나 프로그램이다.
- 클라이언트는 요청을 보내는 주체다.
- 노드는 자바스크립트 애플리케이션이 서버로서 기능하기 위한 도구를 제공하므로 서버 역할을 수행할 수 있다.

<br>

## 자바스크립트 런타임

- 노드는 자바스크립트 런타임이다.
  - 런타임은 특정 언어로 만든 프로그램을 실행할 수 있는 환경을 말한다.
  - 즉, 노드는 자바스크립트 프로그램을 컴퓨터에서 실행할 수 있게 해준다.
- 기존에는 자바스크립트 프로그램을 인터넷 브라우저 위에서만 실행할 수 있었다.
  - 브라우저 이외의 환경에서 실행하기위한 여러 시도 있었으나, 실행 속도문제때문에 큰 호응 x
  - 구글이 2008년 V8엔진을 사용하여 크롬출시 -> 다른 js엔진과 달리 매우 빨랐음
  - 속도 문제 해결되자 노드 프로젝트 시작됨

<br>

## V8 엔진

- V8은 웹 브라우저 내부에서 자바스크립트 수행 속도의 개선을 목표로 처음 고안됐다.
- 속도 향상을 위해 V8은 인터프리터를 사용하는 대신 자바스크립트 코드를 더 효율적인 머신 코드로 변환한다.
- 노드는 V8과 더불어 libuv 라는 라이브러리를 사용한다.
  - libuv는 노드 특성인 이벤트기반, 논블로킹 I/O 모델을 구현하고 있다.

<br>

## 이벤트 기반

- 이벤트 기반 : 이벤트가 발생할때 미리 지정해둔 작업을 수행하는 방식
  - 무엇을할지 미리 등록하는 것을 **이벤트 리스너에 콜백 함수를 등록**한다고 한다.
- 노드도 이벤트 기반 방식으로 동작하므로 이벤트가 발생하면 이벤트리스너에 등록해둔 콜백함수를 호출한다.
- 발생한 이벤트가 없거나 발생한 이벤트를 다 처리하면 다음 이벤트 발생까지 대기한다.
- 이벤트 기반 모델에서는 여러 이벤트가 동시 발생하면, **이벤트 루프**가 어떤 순서로 콜백함수를 호출할지 판단한다.

<br>

## 논블로킹 I/O

- 논블로킹이란 이전 작업이 완료될때까지 멈추지 않고 다음 작업을 수햄함을 뜻한다.

#### 블로킹 방식의 코드

```js
function runningTask() {
  console.log("작업 끝");
}

console.log("Start");
runningTask();
console.log("Finish");

// Start
// 작업 끝
// Finish
```

#### 논블로킹 방식의 코드

```js
function runningTask() {
  console.log("작업 끝");
}

console.log("Start");
setTimeout(runningTask, 0);
console.log("Finish");

// Start
// Finish
// 작업 끝
```

- setTimeout의 콜백함수가 태스크 큐로 보내지므로 순서대로 실행되지 않는다.

<br>

## 싱글 스레드

- 노드는 싱글 스레드이므로 주어진 작업을 혼자서 처리해야한다.
  - 어떤 작업에서 블로킹이 발생하면 다음 일을 처리하지 못한다.
  - 멀티 스레드 시스템에서는 여러 개의 스레드가 일을 나눠서 처리할 수 있다.
- 노드도 싱글 스레드 여러개를 사용해 멀티 스레딩과 비슷한 기능을 하게할 수 있다. (엄밀히 멀티 프로세싱)
  - 프로세스 : 운영체제에서 할당하는 작업의 단위
  - 스레드 : 프로세스 내에서 실행되는 흐름의 단위. 스레드들은 부모 프로세스의 자원을 공유하기 때문에 같은 메모리에 접근가능
