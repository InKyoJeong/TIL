## 콜백함수

다른 함수에 인수로 넘겨지는 함수를 콜백함수라고 한다. 함수의 실행이 끝나면 지정한 콜백함수를 실행해 주도록 함수에 요청할 때 사용한다.

```js
function f(callback, ...){
    ...
    callback();
    ...
}
f(a, ...);
```

이 코드에서 함수 f의 인자로 넘겨진 함수 a가 콜백함수이다.

### 비동기 처리

자바스크립트에서 비동기로 호출되는 함수들은 호출 스택(Call Stack)에 쌓이지 않고 태스크 큐(Task Queue)로 보내진다.

```js
console.log("A");
setTimeout(function() {
  console.log("B");
}, 0);
console.log("C");
```

위 코드는 A, B, C 순으로 콘솔에 표시될 것 같지만 그렇지 않다. 실행 결과는 A, C, B 순으로 콘솔에 찍힌다. `setTimeout`함수로는 인수로 받은 콜백 함수를 일정 시간이 지난 후 실행하도록 예약하는 처리만 하고, 그다음 바로 다음 코드가 실행되기 때문이다.

## 자바스크립트 엔진

구글의 V8은 자바스크립트 엔진의 대표적인 예이다. Chrome과 Node.js에서 사용한다. 대부분의 자바스크립트 엔진은 크게 세 영역으로 나뉜다.

- Memory Heap : 메모리 할당이 일어나는 곳
- Call Stack : 코드 실행에 따라 호출 스택이 쌓이는 곳
- Task Queue : 이벤트 발생 후 호출되어야 할 콜백 함수들이 기다리는 공간. 이벤트 루프가 정한 순서대로 줄을 서 있으므로 콜백 큐(Callback Queue) 라고도 한다.

그리고 Event Loop는 이벤트 발생 시 호출할 콜백 함수들을 관리하고, 호출된 콜백함수의 실행 순서를 결정한다.

### 자바스크립트는 싱글스레드

자바스크립트는 기본적으로 작업을 싱글스레드로 처리한다. 즉, 단 하나의 호출 스택을 사용한다. 호출 스택에 쌓인 함수나 코드를 위에서부터 아래로 차례차례 실행한다. 그리고 하나의 작업이 끝나면 pop하고 바로 아래의 함수나 코드를 실행한다. 작업을 차례대로 실행하므로 하나의 작업이 끝날 때까지 또 다른 작업을 실행하지 않는다.
