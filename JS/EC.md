## 실행컨텍스트

- 실행 가능한 코드를 형상화하고 구분하는 추상적 개념
- **실행 가능한 자바스크립트 코드 블록이 실행되는 환경**

#### 형성되는 경우

- 전역 코드
- eval 코드
- 함수 코드

대부분 함수로 실행 컨텍스트를 생성한다. 제일 위에 쌓이는 실행 컨텍스트가 현재 실행되고 있는 컨텍스트이다.

### 형성 과정

- 1. 활성 객체 생성
  - 매개변수나 변수 및 객체등의 정보를 담는 객체 생성
- 2. arguments 객체 생성
- 3. 스코프 정보 생성
- 4. 변수 생성
  - 현재 실행 컨텍스트 내부에서 사용되는 지역변수 생성이 이뤄짐
  - 변수나 내부함수를 메모리에 생성만 하고, 초기화는 되기 전
- 5. this 바인딩
- 6. 코드 실행
  - 변수 초기화, 함수실행 등의 표현식 실행이 이뤄짐

<br>

## 스코프 체인

- 유효 범위를 나타내는 스코프가 `[[Scope]]` 프로퍼티로 각 함수 객체 내에서 연결 리스트 형식으로 관리 되는것
- 함수가 실행되는 순간 실행 컨텍스트가 생성됨
- ▶︎ 이 실행 컨텍스트는 실행된 함수의 `[[Scope]]` 프로퍼티를 기반으로 새로운 스코프 체인 생성

<br>
 
### 함수 호출시 스코프체인

```js
var v1 = 1;
var v2 = 2;
function func() {
  var v1 = 99;
  var v2 = 100;
  console.log(v1); // 99
  console.log(v2); // 100
}
func();
console.log(v1); // 1
console.log(v2); // 2
```

- 전역 컨텍스트 생성되고, func() 함수객체가 생성됨
- **함수 객체가 생성될때, 그 함수 객체의 `[[Scope]]`는 현재 실행되는 컨텍스트의 변수 객체에 있는 `[[Scope]]`를 그대로 가짐**
- func함수 객체의 `[[Scope]]`는 전역변수 객체

#### func() 함수 실행 후

- **함수를 실행하면 새로운 컨텍스트가 만들어짐** (func 컨텍스트)
- 이 func 컨텍스트의 스코프체인은 **실행된 함수의 `[[Scope]]` 프로퍼티를 그대로 복사하고 현재 생성된 변수 객체를, 복사한 스코프 체인의 맨 앞에 추가함**

#### 스코프 체인 = 현재 실행컨텍스트의 변수 객체 + 상위 컨텍스트의 스코프체인
