## 테이블(Table), 해쉬(Hash)

- AVL 트리의 탐색연산이 O(logN)의 시간복잡도를 보이는 반면 테이블 자료구조의 탐색연산은 O(1)의 시간복잡도를 가진다. 테이블은 데이터가 `키(key)`와 `값(value)`이 한쌍을 이루는 형태이다.

<!-- ### 배열 기반 테이블

```c
#include <stdio.h>

typedef struct _empInfo
{
    int empNum;
    int age;
} EmpInfo;

int main(void)
{
    EmpInfo empInfoArr[1000];
    EmpInfo ei;
    int eNum;

    printf("사번과 나이 입력: ");
    scanf("%d %d", &(ei.empNum), &(ei.age));
    empInfoArr[ei.empNum] = ei;     //저장

    printf("확인할 직원의 사번: ");
    scanf("%d", &eNum);

    ei = empInfoArr[eNum];          //탐색
    printf("사번: %d, 나이: %d \n", ei.empNum, ei.age);

    return 0;
}
```

```
사번과 나이 입력: 1253 27
확인할 직원의 사번: 1253
사번: 1253, 나이: 27
```

직원의 고유번호를 인덱스값으로 해서 그 위치에 데이터를 저장했다. 그러나 고유번호가 매우크다면 매우큰 배열이 필요하다.
 -->

만약 직원의 고유번호를 년도 네자리와 입사순서 네자리로 구성한다고 하고 (예를들어 20120004) 직원의 고유번호를 두자리 수로 바꾸기 위한 함수를 사용한다고 치면

```c
int GetHashValue(int empNum)
{
    return empNum % 100;
}
```

- 이러한 함수를 `해쉬 함수`라고 한다. 해쉬함수는 **넓은 범위의 키를 좁은 범위의 키로 변경**한다.

- 그러나 만약 사원수가 100명이 넘으면 20120004와 20120104라는 번호는 04라는 동일한 번호가 생긴다. 이러한 상황을 **충돌(collision)** 이라고한다.

<br>

### 좋은 해쉬 함수

- 좋은 해쉬 함수를 사용한 결과는 테이블의 전체영역에 데이터가 골고루 분포되어 있다. 충돌이 발생할 확률이 낮다는 것이다.

- 좋은 해쉬 함수의 디자인 방법
  - **자릿수 선택(Digit Selection)** 방법은 예를들어 여덟자리 수로 이뤄진 키에서 네자리를 뽑아 해쉬값을 만든다.
  - **자릿수 폴딩(Digit Folding)** 방법은 숫자를 종이접듯 접어서 겹치게하여 더한 결과를 해쉬값으로 결정한다.

<br>

### 충돌 해결

#### 선형 조사법(Linear Probing)

> 충돌이 발생할 경우 그 옆자리를 살펴보고 비었을 경우 그 자리에 대신 저장하는 방법

- 선형 조사법의 조사 순서(빈자리 찾는 순서)

_f(k)+1_ -> _f(k)+2_ -> _f(k)+3_ -> _f(k)+4_ ...

- 선형 조사법은 **클러스터 현상** (특정구간에 데이터가 몰리는현상) 이 발생한다는 단점이있다.

<br>

#### 이차 조사법(Quadratic Probing)

- 선형조사법이 n칸 옆의 슬롯을 검사한다면, 이차 조사법은 n²칸 옆의 슬롯을 검사한다.

- 이차 조사법의 조사 순서(빈자리 찾는 순서)

_f(k)+1²_ -> _f(k)+2²_ -> _f(k)+3²_ -> _f(k)+4²_ ...

- 슬롯의 상태는 **EMPTY**(데이터가 저장된적 없음), **DELETED**(데이터나 저장된적 있지만 현재는 비워진상태), **INUSE**(현재 데이터가 저장됨)로 나뉜다.

<br>

#### 이중 해쉬(Double Hash)

- 이차 조사법은 빈 슬롯을 찾는 위치가 항상 동일하다는 단점이 있음
- 이중 해쉬 방법은 두개의 해쉬 함수를 만든다.
  - 1차 해쉬함수 : 키를 근거로 저장위치를 결정
  - 2차 해쉬함수 : 충돌발생시 몇칸 뒤를 살필지 결정

<br>

#### 체이닝(Chaining)

- 위의 방법들을 **열린 어드레싱 방법**이라고 한다면 체이닝은 **닫힌 어드레싱 방법**이다.
- 연결리스트를 이용해서 슬롯을 저장한다.
- 하나의 해쉬 값에 다수의 슬롯을 둘 수 있다.
