## HTTP의 문제점

- 1. 도청 가능 : 평문(암호화 하지 않은) 통신이기 때문
- 2. 위장 가능 : 통신 상대를 확인하지 않음
- 3. 변조 가능 : 완전성을 증명할 수 없음

다른 암호화하지 않은 프로토콜도 공통적인 문제이다.

<br>

### 1. 도청 가능

- HTTP 자신을 암호화하는 기능은 없으므로, 통신 자체가 암호화 되지는 않는다.
- TCP/IP는 도청 가능한 네트워크이다.
  - 네트워크 상을 흐르고 있는 패킷 수집 만으로 도청이 가능하다.

#### 암호화로 도청을 피하는방법

- 통신 암호화 : **_SSL(Secure Socket Layer)_** 또는 **_TLS(Transport Layer Security)_** 라는 **다른 프로토콜을 조합**하여 HTTP 통신 내용을 암호화 할 수 있다.
- 콘텐츠 암호화 : 통신하고 있는 **콘텐츠 내용 자체를 암호화**하는 방법이다. HTTP에 암호화 하는 기능은 없으므로 HTTP를 이용하여 운반하는 내용만 암호화 하는것이다.

<br>

### 2. 위장 가능

- HTTP에 의한 통신에는 상대가 누구인지 확인하는 처리는 없다 = 누구나 리퀘스트를 보낼 수 있다.
- 상대를 확인하지 않는 것의 약점
  - 리퀘스트를 보낸 곳의 웹서버가 **원래 리스폰스를 보내야하는 웹서버인지 확인불가** (위장한 웹서버)
  - 리스폰스를 반환한 곳의 클라이언트가 **원래 리퀘스트를 보낸 클라이언트인지 확인불가** (위장한 클라이언트)
  - 통신하고 있는 상대가 **접근 허가된 상대인지 아닌지 확인 불가**
  - 어디에서 누가 리퀘스트 했는지 확인 불가
  - 대량의 리퀘스트에 의한 **Dos공격을 방지 불가**

#### 상대를 확인하는 방법

- SSL로 상대를 확인가능
- SSL은 암호화뿐만 아니라 **상대를 확인하는 수단인 증명서를 제공**함
- 클라이언트는 통신을 개시할때 서버의 증명서를 확인하여 내가 통신하고자 하는 서버임을 알 수 있음

<br>

### 3. 변조 가능

- 완전성을 증명할 수 없다 = 정보가 정확한지 아닌지 확인할 수 없다.
  - ex) 클라이언트에 다운로드한 파일이 서버에 있는 파일과 같은것인지 아닌지 모른다.

#### 변조를 방지하는 방법

- MD5나 SHA-1등의 해시 값을 확인하는 방법, 파일의 디지털 서명을 확인하는 방법
  - 그러나 이 방법으로 확실히 확인할 수 있는것은 아님

<br>

## HTTPS

- HTTP에 암호화나 인증 등의 구조를 더한 것을 HTTPS (HTTP Secure)라고 한다.
- HTTPS는 SSL의 껍질은 덮어쓴 HTTP이다.
  - **HTTP는 직접 TCP와 통신**하지만, SSL을 사용하는 경우 **HTTP는 SSL과, SSL은 TCP와 통신**함

### 공개키 암호화 방식

- SSL에서는 공통키 암호화 문제를 해결한 **공개키 암호화 방식**을 사용함
  - 공통키 암호 : 암호화와 복호화에 하나의 키를 같이 사용하는 방식
- 공개키 암호화 방식은 비밀키와 공개키를 사용함
  - 암호를 보내는쪽은 공개키, 받아들이는 쪽은 비밀키를 사용하여 복호화

#### 공개키 암호화의 문제점

- 공개키가 진짜인지 증명 불가
  - 따라서 인증 **기관이 발행하는 공개키 증명서**가 이용됨

#### SSL은 느린가?

- 평문 통신에 비해서 암호화 통신은 CPU나 메모리 등 리소스를 더 많이 요구함
- 통신할 때마다 암호화를 하면 리소스를 더 소비하기 때문
- 그러나 최근 하드웨어 발달로 HTTPS를 사용해도 속도 저하가 거의 없다고 한다.
- 따라서 거의 모든 웹페이지에서 HTTPS를 사용하는 방향으로 가는중
